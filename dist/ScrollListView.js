!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):"object"==typeof exports?exports.ScrollListView=t():e.ScrollListView=t()}(this,function(){return function(e){function t(l){if(i[l])return i[l].exports;var n=i[l]={exports:{},id:l,loaded:!1};return e[l].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([function(e,t,i){"use strict";function l(e){var t=this,i=e.element.parentNode||n,l=i.offsetHeight||n.offsetHeight;this.element=e.element,this.elementStyle=e.element.style,this.container=i,this.containerHeight=l,this.cells=null,this.data=e.data,this.CELLHEIGHT=e.cellHeight,this.cellsWithinViewportCount=2*Math.ceil(this.containerHeight/this.CELLHEIGHT),this.cellsOutOfViewportCount=this.cellsWithinViewportCount,this.cellsFrag=document.createDocumentFragment(),this.direction=0,this.isScrollingDown=!0,this.currentCell=null,this.cellIndex=1,this.isTopCellOutOfView=!1,this.renderFn=e.renderFn,this.renderCellFn=e.renderCellFn,this.cellReorderThreshold=function(){var e=t.CELLHEIGHT*t.cellsWithinViewportCount/4;return e<t.CELLHEIGHT?0:e},this.render(),this.container.addEventListener("scroll",function(){return t.onScroll()},!1),window.addEventListener("resize",function(){return t.onResize()},!1)}var n=(i(1).winHeight,i(1).body),s=i(1).slice,o=i(1).orderProp,r=i(1).scrollTop,c=i(1).lastScrollTop,h=i(1).resizeTimer;i(2),l.prototype={render:function(){var e,t,i=this.CELLHEIGHT;!this.renderFn,this.renderFn.call(this,this.cellsWithinViewportCount),s.call(this.element.children).forEach(function(l,n){e=n+1,t=["height:",i,"px;","order:",e,";","-webkit-order:",e,";"].join(""),l.style.cssText=t}),this.element.style.minHeight=this.data.length*this.CELLHEIGHT+"px"},renderCell:function(e,t){!this.renderCellFn,this.renderCellFn.call(this,e,t)},isTopElementOutOfViewport:function(e){var t=e.getBoundingClientRect(),i=t.bottom-(this.container.offsetTop-n.scrollTop);return!!t&&i<=-this.cellReorderThreshold()},isBottomElementOutOfViewport:function(e){var t=e.getBoundingClientRect(),i=t.top-(this.container.offsetTop-n.scrollTop);return!!t&&i>this.containerHeight+this.cellReorderThreshold()},onScroll:function(){r=this.container.scrollTop,this.direction=r-c,this.checkCells()},onResize:function(){var e=this;clearTimeout(h),h=setTimeout(function(){e.containerHeight=e.container.offsetHeight},250)},getCurrentCell:function(e){return this.cells[e%this.cells.length]},checkCells:function(){this.cells=this.cells||s.call(this.element.children),this.isScrollingDown=this.direction>0,this.currentCell=this.getCurrentCell(this.cellsOutOfViewportCount),this.isScrollingDown?(this.isTopCellOutOfView=this.isTopElementOutOfViewport(this.currentCell),this.isTopCellOutOfView&&this.cellsOutOfViewportCount<this.data.length&&(this.cellsOutOfViewportCount++,this.cellIndex=this.cellsOutOfViewportCount,this.elementStyle.paddingTop=parseInt(this.elementStyle.paddingTop||0,10)+this.CELLHEIGHT+"px",this.currentCell.style[o]=this.cellIndex,this.renderCell(this.currentCell,this.cellIndex-1))):this.isScrollingDown||(this.currentCell=this.getCurrentCell(this.cellsOutOfViewportCount-1),this.isBottomCellOutOfView=this.isBottomElementOutOfViewport(this.currentCell),this.isBottomCellOutOfView&&this.cellsOutOfViewportCount>this.cellsWithinViewportCount&&(this.cellIndex=this.cells[this.cellsOutOfViewportCount--%this.cells.length].style[o]-1,this.elementStyle.paddingTop=parseInt(this.elementStyle.paddingTop||0,10)-this.CELLHEIGHT+"px",this.currentCell.style[o]=this.cellIndex,this.renderCell(this.currentCell,this.cellIndex-1))),c=this.container.scrollTop}},e.exports=l},function(e,t){"use strict";var i,l=window.innerHeight,n=document.body,s=[].slice,o="webkitOrder"in n.style?"webkitOrder":"order",r=n.scrollTop,c=n.scrollTop;t.winHeight=l,t.body=n,t.slice=s,t.orderProp=o,t.scrollTop=r,t.lastScrollTop=c,t.resizeTimer=i},function(e,t,i){i(4)(i(3))},function(e){e.exports=".ScrollListView{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;position:relative}.ScrollListView,.ScrollListView>*{-webkit-transform:translateZ(0);transform:translateZ(0)}"},function(e){e.exports=function(e){var t=document.createElement("style");t.type="text/css";var i=document.getElementsByTagName("head")[0];return i.appendChild(t),t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)),function(){i.removeChild(t)}}}])});